<div class="m-4">
<h1>Leaderboards</h1>
<br>

<div>
  <h3>ğŸº Most Popular Beers ğŸº</h3>
  <h5> ğŸ‰ Our most requested beers ğŸ‰ </h5>
  <table style="width:50%">
    <tr>
      <th>Beer</th>
      <th>Times Requested</th>
    </tr>
    <% Beer.most_popular.sort_by {|beer, count| count }.reverse!.each do |beer| %>
      <tr>
        <td><%= beer[0].name %></td>
        <td><%= beer[1] %></td>
      </tr>
    <% end %>
  </table>
</div>

<br>

<div>
<h3>Most Snagtastic</h3>
<h5>ğŸ» These folks snag more than they request ğŸ»</h5>
  <table style="width:50%">
    <tr>
      <th>Name</th>
      <th>Times they snagged</th>
      <th>Times they requested</th>
      <th>Ratio</th>
    </tr>
    <% @users.sort_by {|user| user.snag_ratio }.reverse![0..5].each do |user| %>
      <tr>
        <td><%= user.name %></td>
        <td><%= user.completed_snags.length %></td>
        <td><%= user.fulfilled_requests.length %></td>
        <td><%= '%.2f' % user.snag_ratio %></td>
      </tr>
    <% end %>
  </table>
</div>


<br>
<br>

<div>
  <h3>Most Prolific Snaggers</h3>
  <h5>ğŸ» These snaggers have helped out more people ğŸ»</h5>
  <table style="width:50%">
    <tr>
      <th>Name</th>
      <th>People they've snagged for</th>
    </tr>
    <% @users.sort_by {|user| user.unique_receivers.length }.reverse![0..5].each do |user| %>
      <tr>
        <td><%= user.name %></td>
        <td><%= user.unique_receivers.length %></td>
      </tr>
    <% end %>
  </table>
</div>

<br>
<br>

<div>
  <h3>The Mooch List</h3>
  <h5> ğŸ˜¬ These folks have great friends... ğŸ˜¬ </h5>
  <table style="width:50%">
    <tr>
      <th>Name</th>
      <th>Times they snagged</th>
      <th>Times they requested</th>
      <th>Ratio</th>
    </tr>
    <% @users.sort_by {|user| user.snag_ratio }[0..5].each do |user| %>
      <tr>
        <td><%= user.name %></td>
        <td><%= user.completed_snags.length %></td>
        <td><%= user.fulfilled_requests.length %></td>
        <td><%= '%.2f' % user.snag_ratio %></td>
      </tr>
    <% end %>
  </table>
</div>

<br>
<br>

<div>
  <h3>ğŸº Most Prolific...well. ğŸº</h3>
  <h5> ğŸ» These are our favorite users! ğŸ» </h5>
  <table style="width:50%">
    <tr>
      <th>Name</th>
      <th>Requests</th>
    </tr>
    <% @users.sort_by {|user| user.fulfilled_requests.length }.reverse![0..5].each do |user| %>
      <tr>
        <td><%= user.name %></td>
        <td><%= user.fulfilled_requests.length %></td>
      </tr>
    <% end %>
  </table>
</div>
</div>

